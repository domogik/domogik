<nav class="navbar navbar-dmg navbar-static-top" role="navigation">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#menu-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/" id="admin">Admin</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="menu-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li{% if mactive == "clients" %} class="active" {% endif %} id="clients"><a href="/clients"><i class="fa fa-cubes"></i> {% trans %}Clients{% endtrans %}</a></li>
        <li{% if mactive == "scenario" %} class="active" {% endif %}><a href="/scenario"><i class="fa fa-cog"></i> {% trans %}Scenarios{% endtrans %}</a></li>
        <li class="dropdown{% if mactive == "timeline" or mactive == "battery" or mactive == "camera" or mactive == "orphans" or mactive == "datatypes" %} active{% endif %}" id="views">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-list"></i> {% trans %}Views{% endtrans %} <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li{% if mactive == "timeline" %} class="active" {% endif %} id="timeline"><a href="/timeline"><i class="fa fa-clock-o"></i> {% trans %}Timeline{% endtrans %}</a></li>
            <li{% if mactive == "battery" %} class="active" {% endif %} id="battery"><a href="/battery"><i class="fa fa-battery-full"></i> {% trans %}Battery{% endtrans %}</a></li>
            <li{% if mactive == "camera" %} class="active" {% endif %} id="camera"><a href="/camera"><i class="fa fa-video-camera"></i> {% trans %}Camera{% endtrans %}</a></li>
            <li{% if mactive == "orphans" %} class="active" {% endif %} id="orphans"><a href="/orphans"><i class="fa fa-chain-broken"></i> {% trans %}Orphan Domogik devices{% endtrans %}</a></li>
            <li{% if mactive == "upgrade" %} class="active" {% endif %} id="orphans"><a href="/upgrade"><i class="fa fa-exchange"></i> {% trans %}Upgrade Domogik devices{% endtrans %}</a></li>
            <li{% if mactive == "datatypes" %} class="active" {% endif %} id="datatypes"><a href="/datatypes"><i class="fa fa-database"></i> {% trans %}Domogik Data Types{% endtrans %}</a></li>
          </ul>
        </li>
        <li{% if mactive == "users" %} class="active" {% endif %} id="users"><a href="/users"><i class="fa fa-users"></i> {% trans %}Users{% endtrans %}</a></li>
        <li{% if mactive == "locations" %} class="active" {% endif %} id="locations"><a href="/locations"><i class="fa fa-map-marker"></i> {% trans %}Locations{% endtrans %}</a></li>
        <li{% if mactive == "config" %} class="active" {% endif %} id="config"><a href="/config"><i class="fa fa-pencil-square-o"></i> {% trans %}Global Config{% endtrans %}</a></li>
        <li{% if mactive == "apidoc" %} class="active" {% endif %} id="api"><a href="/apidoc"><i class="fa fa-book"></i> {% trans %}Rest and MQ API{% endtrans %}</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/logout"><i class="fa fa-sign-out"></i> {% trans %}Logout{% endtrans%}</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown" id="lang">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-globe"></i><span  id="language"> {{ mactive|currentlocal }}</span><b class="caret"></b></a>
          <ul class="dropdown-menu">
            {% set languages = mactive|languages %}
            {% for lang, desc in languages.items()%}
                <li id={{ lang }}><a onclick="setlanguage({{ lang }})">{{ lang }} : {{ desc }}</a></li>
            {% endfor %}
          </ul>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
    {% for item in global_errors: %}
    <div class="alert alert-danger clearfix" role="alert">{{ item[0] }}<a href="{{ item[1] }}" class="btn btn-sm btn-danger pull-right">Fix it</a></div>
    {% endfor %}
  </div><!-- /.container-fluid -->
</nav>
<script type="text/javascript">
    function setlanguage(lang) {
        $('#language')[0].textContent = " "+lang.id;
        document.cookie  = 'dmg_language='+lang.id+';path=/;expires=' + new Date(2147483647 * 1000).toUTCString();
        location.reload();
    }
</script>
